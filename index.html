<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Scalix: Welcome to SCALIX!</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Scalix<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Welcome to SCALIX! </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> Scalix is a data parallel computing framework designed to provide an easy-to-use interface for designing data parallel applications that automatically scale to the available compute resources. Data distribution and load balancing are abstracted away from the user, allowing them to focus on the application logic. Scalix is designed to be written using "kernel style" programming, where the user writes a single function that is executed on a grid of threads.</p>
<p>Currently, Scalix is only supported on a single machine with multiple CUDA devices that must support Unified Memory. Furthermore, while not strictly required, it is recommended to use Linux and a CUDA device with compute capability 6.0 or higher so that we can take advantage of on-demand page migration. Performance without on-demand page migration is not tested, but will assuredly be slower.</p>
<p>In the future, we plan to migrate to a SYCL-based implementation + MPI. This future specification will look drastically different as we won't be able to rely on Unified Memory, but many of the concepts will remain the same. Specifically, the user should be able to write for an abstract "device" that may be one or many actual compute devices.</p>
<p>Even further in the future we plan to define a generic specification for which anyone can write their own implementation.</p>
<p>Think of this current version of Scalix as a proof of concept.</p>
<p>For a more detailed outline of our roadmap, see ROADMAP.md.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Getting Started</h1>
<p>For the moment, this is a header-only library, but that may change in the future. Any program that uses Scalix must be compiled with the nvcc flag <code>--extended-lambda</code>. The library is written in C++17. We have provided a <code>CMakeLists.txt</code> file that provides the <code>scalix</code> interface library that, when added as a link to a target, will automatically add the <code>--extended-lambda</code> flag to the nvcc compiler. There are also a number of options that can be used to do things like emulate multiple devices to check for correctness. These options are described in the <code>CMakeLists.txt</code> file.</p>
<h2><a class="anchor" id="autotoc_md2"></a>
Writing a Scalix Program</h2>
<p>In the following program we add one to all elements of a Scalix array.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &lt;scalix/scalix.cuh&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line">    <span class="comment">// create a 2D array of 1000x1000 elements</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// the unified memory hints for the array are set such as to maximize</span></div>
<div class="line">    <span class="comment">// performance for equally distributed access across all devices</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::array&lt;int, 2&gt;</a> arr({1000, 1000});</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// initialize the array to 0</span></div>
<div class="line">    <span class="comment">//</span></div>
<div class="line">    <span class="comment">// kernels automatically distribute the work across all devices</span></div>
<div class="line">    <span class="comment">// for the result array</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::execute_kernel</a>([&amp;](<a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::kernel_handler</a>&amp; handler) {</div>
<div class="line">        handler.launch(</div>
<div class="line">            <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_range_t&lt;2&gt;</a>(arr.shape()),</div>
<div class="line">            arr,  <span class="comment">// need to provide a result array to guide the distribution of</span></div>
<div class="line">                  <span class="comment">// work</span></div>
<div class="line">            [=] __device__(<span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_index_t&lt;2&gt;</a>&amp; idx,</div>
<div class="line">                           <span class="comment">/*see below for what this is*/</span> <span class="keyword">const</span> <span class="keyword">auto</span>&amp;) {</div>
<div class="line">                arr[idx] = 0;</div>
<div class="line">            }</div>
<div class="line">        );</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// we also provide a kernel info object (sclx::kernel_info&lt;RangeRank,</span></div>
<div class="line">    <span class="comment">// ThreadBlockRank&gt;) add one to all elements and print out the block thread</span></div>
<div class="line">    <span class="comment">// id</span></div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::execute_kernel</a>([&amp;](<a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::kernel_handler</a>&amp; handler) {</div>
<div class="line">        handler.launch(</div>
<div class="line">            <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_range_t&lt;2&gt;</a>(arr.shape()),</div>
<div class="line">            arr,</div>
<div class="line">            [=] __device__(</div>
<div class="line">                <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_index_t&lt;2&gt;</a>&amp; idx,</div>
<div class="line">                <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::kernel_info</a>&lt;</div>
<div class="line">                    2,</div>
<div class="line">                    sclx::cuda::traits::kernel::default_block_shape.rank()&gt;&amp;</div>
<div class="line">                    info</div>
<div class="line">            ) {</div>
<div class="line">                printf(</div>
<div class="line">                    <span class="stringliteral">&quot;block thread id: %u\n&quot;</span>,</div>
<div class="line">                    <span class="keyword">static_cast&lt;</span>uint<span class="keyword">&gt;</span>(info.local_thread_id()[0])</div>
<div class="line">                );</div>
<div class="line">                arr[idx] += 1;</div>
<div class="line">            }</div>
<div class="line">        );</div>
<div class="line">    });</div>
<div class="line">}</div>
<div class="ttc" id="anamespacesclx_html_ac2d21ed31e26499c814588aae7a7bcf5"><div class="ttname"><a href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::shared_ptr</a></div><div class="ttdeci">std::shared_ptr&lt; T &gt; shared_ptr</div><div class="ttdef"><b>Definition</b> pointers.hpp:85</div></div>
</div><!-- fragment --><p>A special type of problem one may face is one where the write pattern cannot fit into a neat range. For example, suppose we want to generate a histogram for some values in an array. Sequentially, we would do something like iterate over each value, determine the bin it belongs to, and increment the value of that bin.</p>
<p>To do this in Scalix, we instead would use the "index generator"-based kernel API. The index generator in this case would take an index from the range associated with the values and return the bin index. Our kernel implementation replicates the entire range over each device, but only calls the provided functor if the write index is local to the device. So, unfortunately, this means scaling will not be ideal, and in many cases worse than a single device implementation. However, what this does allow is the prevention of expensive memory transfers for a problem that mostly scales well using the range-based API.</p>
<div class="fragment"><div class="line"> ++</div>
<div class="line"><span class="preprocessor">#include &lt;scalix/scalix.cuh&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="comment">// required interface for an index generator</span></div>
<div class="line"><span class="keyword">class </span>histogram_index_generator {</div>
<div class="line">  <span class="keyword">public</span>:</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint range_rank = 1;</div>
<div class="line">    <span class="keyword">static</span> <span class="keyword">constexpr</span> uint index_rank = 1;</div>
<div class="line"> </div>
<div class="line">    __host__ __device__ <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_range_t&lt;range_rank&gt;</a>&amp; range() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    __host__ __device__ <span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_range_t&lt;index_rank&gt;</a>&amp; index_range() <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    __host__ __device__ <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_index_t&lt;index_rank&gt;</a></div>
<div class="line">    operator()(<span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_index_t&lt;range_rank&gt;</a>&amp;) <span class="keyword">const</span>;</div>
<div class="line"> </div>
<div class="line">    ...</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> main() {</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::array&lt;int, 1&gt;</a> values({1000});</div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::array&lt;int, 1&gt;</a> histogram({100});</div>
<div class="line"> </div>
<div class="line">    histogram_index_generator index_generator(...);</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::execute_kernel</a>([&amp;](<a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::kernel_handler</a>&amp; handler) {</div>
<div class="line">        handler.launch(</div>
<div class="line">            index_generator,</div>
<div class="line">            histogram,</div>
<div class="line">            [=] __device__(<span class="keyword">const</span> <a class="code hl_typedef" href="namespacesclx.html#ac2d21ed31e26499c814588aae7a7bcf5">sclx::md_index_t&lt;1&gt;</a>&amp; histogram_idx, <span class="keyword">const</span> <span class="keyword">auto</span>&amp;) {</div>
<div class="line">                atomicAdd(&amp;histogram[histogram_idx], 1);</div>
<div class="line">            }</div>
<div class="line">        );</div>
<div class="line">    });</div>
<div class="line">}</div>
</div><!-- fragment --><p>The [examples](examples) directory contains a number of examples that demonstrate how to use the library. For every new feature we add, we will do our best to add an example that demonstrates its use. As we approach the first stable release, we will start to focus on adding proper documentation.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Performance</h1>
<p>We have shown almost perfect strong scaling for the <code>distributed_access</code> example in the repo, distributed across 2 GPUs. The example has two arrays of interest. Each kernel reads 64 elements from one array and atomically adds it to an element of the other array for each element in the result array. A portion of these reads happen across device boundaries. Also note that the source and result arrays exchange roles for each kernel, showing we can still get good performance, even for arrays that read/write equally. Finally, a distributed reduction algorithm is used to sum the values of one of the arrays together just for fun (and to check that the solution is correct). The following times were recorded on 1 vs 2 RTX 3090s, respectively.</p>
<div class="fragment"><div class="line">1 GPU time: 163.1ms</div>
<div class="line">2 GPU time: 87.5ms</div>
</div><!-- fragment --> </div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8 </li>
  </ul>
</div>
</body>
</html>
